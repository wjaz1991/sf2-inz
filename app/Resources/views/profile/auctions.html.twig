{% extends 'profile/profile_layout.html.twig' %}

{% block profile_page_content %}
    <h2>List of your auctions</h2>
    
    <!-- active filter -->
    <div class="col-md-12">
        <p><strong>Auction status filter</strong></p>
        <form action="" method="GET" class="form-inline">
            <div class="form-group">
                <select class="form-control" name="active">
                    <option value="true">Active</option>
                    <option value="false">Ended</option>
                </select>
                <button type="submit" class="btn btn-default">
                    Filter
                </button>
            </div>
        </form>
    </div>
    <div class="col-md-12">
        <ul class="list-group profile-auctions-list">
        {% for auction in auctions %}
            {% set images_count = auction.images | length %}
            <li class="list-group-item col-md-12">
                {% if images_count > 0 %}
                <div class="col-md-3">
                    <img class="prof-auction-img" src="{{ auction.getFirstImage }}">
                </div>
                <div class="col-md-6">
                {% else %}
                <div class="col-md-9">
                {% endif %}

                    <p class="prof-auction-title">{{ auction.title }}</p>
                    <p class="prof-auction-dates">
                        Started on: {{ auction.startDate | date('Y-m-d H:i:s') }},
                        ends on {{ auction.endDate | date('Y-m-d H:i:s') }}
                    </p>
                    {% if auction.getDaysLeft %}
                        <p class="prof-auction-days">{{ auction.getDaysLeft }} days left</p>
                    {% endif %}
                    <p class="prof-auction-price">{{ auction.price | number_format(2, '.', ' ')}}</p>
                    <p class="prof-auction-bids">{{ auction.bids | length }} bids</p>
                </div>
                <div class="col-md-3 auction-buttons">
                    {% if auction.getDaysLeft %}
                        <a href="{{ path('auction_edit', {'id': auction.id }) }}">
                            <button class="btn btn-default button-blue">Edit</button>
                        </a>
                        <a href="{{ path('auction_delete', {'auction': auction.id }) }}">
                            <button class="btn btn-default button-blue">Delete</button>
                        </a>
                    {% else %}
                        <button class="btn btn-default button-red">Ended</button>
                    {% endif %}
                </div>
            </li>
        {% else %}
            <h3>You have no auctions yet.</h3>
        {% endfor %}
        </ul>
    </div>
        
{% endblock %}